# パンくずリストの作り方

パンくずリストとは？

ユーザーが今サイトのどの場所にいるのかをわかるように表示するリストのことです！

よくサイトの上部分で見かけます！

**＜パンくずリストの作り方＞**

パンくずリストは、gretelというgemを使って簡単に作れます！

- まずは`Gemfile`にgemを記入しインストールします！

`gem 'gretel'
#記入後 bundle install` を実行します！

次にターミナルにて実行コマンドを入力。

実行後、configフォルダに`breadcrumbs.rb`が作成されていれば準備はOK！！

⭐️`breadcrumbs.rb` ファイルにて、パンくずリストの設定を行います！

書き方結構独特です！

[ルートページの表示方法]

config/breadcrumbs.rb | 設定ファイルの確認

```ruby
crumb :root do
  link "Home", root_path
end
```

config/breadcrumbs.rbの最初は以上のコードのみ書かれています。

これは、ルートページのパンくずの設定が、記述されています！！

- 例えば、記事一覧ページのパンくずリストを表示する

```ruby

crumb :posts do
  link '記事', posts_path
  parent :root
end
```

***このように、パンくずの設定を行う際のコードは以下の法則で書きます！***

```ruby
crumb "ページ名" do
  link "ビューに表示される名前", "リンクされるURL(表示させたいページのパス)"
  parent :親のページ名（現在の前のページ)
  end
```

これが、パンくず表示の`breadcrumbs.rb` の基本形です！！！

### パンくずリストをviewページに表示させる方法

まず、大体の場合は、ほとんどのページに表示させたいので、

`application.html.erb`に以下のコードを記述をします。

これで、どこにパンくずリストを表示させるかを設定することができました。

```ruby
  <body>
    <%= breadcrumbs separator: " &rsaquo; " %> 
    <%= yield %>
  </body>
```

**しかし…!これだけじゃ不十分なんです！**

次に、どの`crumb`をどのviewページに表示させるかという設定をしなければいけません！

下記のコードを、各ビューファイルに指定する必要があります。

＜各ビューファイル＞

```ruby
<% breadcrumb :設定した(表示させたい）crumb名 %>
```

以上が、パンくずリストの作り方の基本形です！

### これから説明するのはちょっとややこしいです😅

例えば、記事の詳細ページに、パンくずリストを表示させた色します。

その場合、`breadcrumbs.rb`に設定を追加する際に、urlに、

各記事の情報を加えないといけないですよね？

そんな時はどうすればいいのでしょうか？🤷

まず、`breadcrumbs.rb` はこう書きます！

```ruby
crumb :posts_show do |post|
  link '記事詳細', articles_path(post)
  parent :root
end
```

この時、[do |post|]　について最初なんじゃこれとは思っていたのですが、

これは、コントローラーにて、設定された、ユーザー情報が、入っている、インスタンス変数が入るように、 |user|を設定させています！

そして、articles_path(post)で、表示させたいページへのパスに、ユーザーの情報を入れ込んでいるというわけです！

(まだこのままだと、postの中身はnilです）

しかしこれで、いつも通り、viewページにcrumb名を指定すると、エラーが出てしまいます！

これは、crumb内の、postの中身がnilになっていいることが原因です！

この場合、crumb内の、postの中身を指定するため、

viewファイルで以下のように書く必要があります！

```ruby
<% breadcrumb :post_show, @post %>
```

この@postは、コントローラーにて設定した

各記事の情報を含ませたインスタンス変数です！

これで、|post|の中身に、@postを入れるように設定することができました！

これで、パンくずリストにてパスに

記事の情報（インスタンス変数）入れることができます！

[参考サイト]

https://pikawaka.com/rails/gretel
